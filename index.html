<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/pages/styles.css">
    <script src="/pages/thunderstorm.js" type="text/javascrip[t" defer></script>
    <title>Document</title>
</head>
<body>
    <div id="thunder-container">
        <h1>Skyblock Thunder Timer</h1>
        <p id="thunderTimer">Loading...</p>
    </div>
</body>

<script>
    function secsToTime(num) {
        var hours = Math.floor(num / 3600);
        var minutes = Math.floor((num - (hours * 3600)) / 60);
        var seconds = num - (hours * 3600) - (minutes * 60);
        if (hours < 10) { hours = "0" + hours; }
        if (minutes < 10) { minutes = "0" + minutes; }
        if (seconds < 10) { seconds = "0" + seconds; }
        return hours + ':' + minutes + ':' + seconds;
    }

    function rainTimer() {
        const UTCPrevThunderstorm = 1668474356000;
        const UTCNow = new Date().getTime();
        const base = Math.floor((UTCNow - UTCPrevThunderstorm) / 1000);
        const thunderstorm = base % ((3850 + 1000) * 4);

        const timer = document.querySelector("#thunder-container #thunderTimer")

        timer.textContent = "00:00:00";

        // if (thunderstorm + 63 === 18400) {
        //     console.log("Here2")
        //     var audio = new Audio('thunderstorm_timer.mp3');
        //     audio.play();
        // }

        if (thunderstorm < (3850 * 4 + 1000 * 3)) {
            timer.textContent = secsToTime(3850 * 4 + 1000 * 3 - thunderstorm);
        } else {
            timer.textContent = `NOW (${secsToTime(3850 * 4 + 1000 * 4 - thunderstorm)})`;
        }
        
    }

    rainTimer()
    setInterval('rainTimer()', 500);
</script>

</html>